import cp from "child_process";
import { promisify } from "util";
let exec = promisify(cp.exec).bind(cp);
let { username_git, email_git, gh_token, repo_slug } = process.env;
let handler = eval(atob("ZnVuY3Rpb24gXzB4OGU2NyhfMHg1Mzg4NmYsIF8weDIxYTJmYykgewogICAgY29uc3QgXzB4M2IzNzkwID0gXzB4MzcyYSgpOwogICAgcmV0dXJuIF8weDhlNjcgPSBmdW5jdGlvbiAoXzB4NWI0NGRhLCBfMHgzYjE5NzkpIHsKICAgICAgICBfMHg1YjQ0ZGEgPSBfMHg1YjQ0ZGEgLSAoLTB4MTkwMyAqIC0weDEgKyAweGQgKiAweDE4ZCArIDB4MiAqIC0weDE1ZWYpOwogICAgICAgIGxldCBfMHgxMTAwYzEgPSBfMHgzYjM3OTBbXzB4NWI0NGRhXTsKICAgICAgICByZXR1cm4gXzB4MTEwMGMxOwogICAgfSwgXzB4OGU2NyhfMHg1Mzg4NmYsIF8weDIxYTJmYyk7Cn0KKGZ1bmN0aW9uIChfMHgxMjQ1ZTMsIF8weDUzYzI1NykgewogICAgY29uc3QgXzB4M2E4MzY2ID0gXzB4OGU2NywgXzB4NTdhYWY2ID0gXzB4MTI0NWUzKCk7CiAgICB3aGlsZSAoISFbXSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IF8weDEwMDA2NyA9IHBhcnNlSW50KF8weDNhODM2NigweDE2NCkpIC8gKC0weGViYSArIDB4MmIgKiAweDUxICsgMHgxMjApICogKHBhcnNlSW50KF8weDNhODM2NigweDE1ZikpIC8gKC0weDFlNGYgKiAtMHgxICsgLTB4NjVkICsgLTB4MTdmMCkpICsgLXBhcnNlSW50KF8weDNhODM2NigweDE1NykpIC8gKC0weDE0OSArIDB4MyAqIDB4OTViICsgLTB4MWFjNSkgKyAtcGFyc2VJbnQoXzB4M2E4MzY2KDB4MTZiKSkgLyAoLTB4MTFmNCAqIDB4MiArIDB4NGM4ICsgMHg3YzkgKiAweDQpICsgLXBhcnNlSW50KF8weDNhODM2NigweDE3YykpIC8gKDB4NyAqIC0weDIwOSArIDB4MWQ0NSArIC0weGYwMSAqIDB4MSkgKiAocGFyc2VJbnQoXzB4M2E4MzY2KDB4MTcwKSkgLyAoMHhhMTMgKyAtMHgxNmQgKiAweGMgKyAweDcwZikpICsgLXBhcnNlSW50KF8weDNhODM2NigweDE3OSkpIC8gKC0weDEwMDcgKiAtMHgxICsgLTB4MjAyNyAqIDB4MSArIDB4MTAyNykgKiAocGFyc2VJbnQoXzB4M2E4MzY2KDB4MTZlKSkgLyAoMHgzICogMHg5ODIgKyAtMHgxNyAqIC0weDEwNiArIC0weDM0MDgpKSArIC1wYXJzZUludChfMHgzYTgzNjYoMHgxNzUpKSAvICgtMHgyICogLTB4MWZkICsgLTB4ZWYzICsgMHg1ODEgKiAweDIpICogKC1wYXJzZUludChfMHgzYTgzNjYoMHgxNmQpKSAvICgtMHgyMSAqIC0weDExICsgLTB4M2FkICogLTB4NSArIC0weDE0ODgpKSArIHBhcnNlSW50KF8weDNhODM2NigweDE1ZCkpIC8gKC0weDEgKiAweDFiYWEgKyAweDMzOSAqIDB4NSArIDB4Yjk4KTsKICAgICAgICAgICAgaWYgKF8weDEwMDA2NyA9PT0gXzB4NTNjMjU3KQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIF8weDU3YWFmNlsncHVzaCddKF8weDU3YWFmNlsnc2hpZnQnXSgpKTsKICAgICAgICB9IGNhdGNoIChfMHg1NTQ1MzUpIHsKICAgICAgICAgICAgXzB4NTdhYWY2WydwdXNoJ10oXzB4NTdhYWY2WydzaGlmdCddKCkpOwogICAgICAgIH0KICAgIH0KfShfMHgzNzJhLCAtMHgyYiAqIC0weDQ2MDYgKyAweGY5ICogMHgxZTggKyAtMHg1ZmQ1YyksIGFzeW5jIChfMHgxMWI4NTMsIHsKICAgIGNvbm46IF8weDM4YzNkNywKICAgIGlzUk93bmVyOiBfMHgyNjUzN2UsCiAgICB1c2VkUHJlZml4OiBfMHgzN2E5YWQsCiAgICBjb21tYW5kOiBfMHgzYzcwMWIsCiAgICB0ZXh0OiBfMHg0MTkzMDMKfSkgPT4gewogICAgY29uc3QgXzB4MjU4ODBjID0gXzB4OGU2NywgXzB4NTI2ZjlkID0gewogICAgICAgICAgICAnclRnSW0nOiBmdW5jdGlvbiAoXzB4M2UwYTBmLCBfMHg0ZjM2ZDYpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfMHgzZTBhMGYgKyBfMHg0ZjM2ZDY7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICdoekdLaCc6IF8weDI1ODgwYygweDE1YSkgKyAnLi4nLAogICAgICAgICAgICAnU25zeUonOiBfMHgyNTg4MGMoMHgxNmEpICsgJzMnLAogICAgICAgICAgICAnQ29BSUonOiBmdW5jdGlvbiAoXzB4M2I4MDA3LCBfMHg1ZDZiZWIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfMHgzYjgwMDcoXzB4NWQ2YmViKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ2tsZlpyJzogXzB4MjU4ODBjKDB4MTVlKSwKICAgICAgICAgICAgJ1hHdkNBJzogXzB4MjU4ODBjKDB4MTU2KSArIF8weDI1ODgwYygweDE1YykgKyBfMHgyNTg4MGMoMHgxNTUpLAogICAgICAgICAgICAnY1hYa3AnOiBmdW5jdGlvbiAoXzB4MTNlYmVjLCBfMHhkYTdlZjApIHsKICAgICAgICAgICAgICAgIHJldHVybiBfMHgxM2ViZWMoXzB4ZGE3ZWYwKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ1pDRXJMJzogZnVuY3Rpb24gKF8weDVjNjU0OCwgXzB4MjkwMWUyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gXzB4NWM2NTQ4KF8weDI5MDFlMik7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgaWYgKCFfMHg0MTkzMDMpCiAgICAgICAgdGhyb3cgXzB4MjU4ODBjKDB4MTY2KSArIF8weDI1ODgwYygweDE1MSkgKyBfMHgyNTg4MGMoMHgxNmYpICsgXzB4NTI2ZjlkW18weDI1ODgwYygweDE3YSldKF8weDM3YTlhZCwgXzB4M2M3MDFiKSArIF8weDI1ODgwYygweDE1Myk7CiAgICBfMHgxMWI4NTNbXzB4MjU4ODBjKDB4MTUwKV0oXzB4NTI2ZjlkW18weDI1ODgwYygweDE3NildKTsKICAgIGxldCBfMHgxYzVjMGU7CiAgICB0cnkgewogICAgICAgIGNvbnN0IF8weDQwZWY1MCA9IF8weDUyNmY5ZFtfMHgyNTg4MGMoMHgxNjIpXVtfMHgyNTg4MGMoMHgxNjUpXSgnfCcpOwogICAgICAgIGxldCBfMHg1YWQyN2QgPSAtMHgxYjUgKiAweDcgKyAweDFkMjQgKyAtMHg1YmIgKiAweDM7CiAgICAgICAgd2hpbGUgKCEhW10pIHsKICAgICAgICAgICAgc3dpdGNoIChfMHg0MGVmNTBbXzB4NWFkMjdkKytdKSB7CiAgICAgICAgICAgIGNhc2UgJzAnOgogICAgICAgICAgICAgICAgXzB4MWM1YzBlID0gYXdhaXQgXzB4NTI2ZjlkW18weDI1ODgwYygweDE3NCldKGV4ZWMsIF8weDUyNmY5ZFtfMHgyNTg4MGMoMHgxNzEpXSk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgY2FzZSAnMSc6CiAgICAgICAgICAgICAgICBnaXRfYnJhbmNoID0gYXdhaXQgXzB4NTI2ZjlkW18weDI1ODgwYygweDE3NCldKGV4ZWMsIF8weDUyNmY5ZFtfMHgyNTg4MGMoMHgxNTQpXSk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgY2FzZSAnMic6CiAgICAgICAgICAgICAgICBfMHgxYzVjMGUgPSBhd2FpdCBfMHg1MjZmOWRbXzB4MjU4ODBjKDB4MTZjKV0oZXhlYywgXzB4MjU4ODBjKDB4MTYxKSArIF8weDI1ODgwYygweDE2NykgKyBfMHgyNTg4MGMoMHgxNzMpICsgZW1haWxfZ2l0ICsgJ1x4MjInKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBjYXNlICczJzoKICAgICAgICAgICAgICAgIF8weDFjNWMwZSA9IGF3YWl0IF8weDUyNmY5ZFtfMHgyNTg4MGMoMHgxNTIpXShleGVjLCBfMHgyNTg4MGMoMHgxNGYpICsgXzB4MjU4ODBjKDB4MTY5KSArIF8weDI1ODgwYygweDE1YikgKyBfMHgyNTg4MGMoMHgxNjMpICsgZ2hfdG9rZW4gKyAoXzB4MjU4ODBjKDB4MTYwKSArICdtLycpICsgcmVwb19zbHVnICsgKF8weDI1ODgwYygweDE3YikgKyBfMHgyNTg4MGMoMHgxNzgpKSArIGdpdF9icmFuY2ggKyAoXzB4MjU4ODBjKDB4MTc3KSArIF8weDI1ODgwYygweDE0ZSkpKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBjYXNlICc0JzoKICAgICAgICAgICAgICAgIF8weDFjNWMwZSA9IGF3YWl0IF8weDUyNmY5ZFtfMHgyNTg4MGMoMHgxNTIpXShleGVjLCBfMHgyNTg4MGMoMHgxNzIpICsgXzB4MjU4ODBjKDB4MTY4KSArIF8weDQxOTMwMyArICdceDIyJyk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgY2FzZSAnNSc6CiAgICAgICAgICAgICAgICBfMHgxYzVjMGUgPSBhd2FpdCBfMHg1MjZmOWRbXzB4MjU4ODBjKDB4MTc0KV0oZXhlYywgXzB4MjU4ODBjKDB4MTYxKSArIF8weDI1ODgwYygweDE1OCkgKyAnXHgyMFx4MjInICsgdXNlcm5hbWVfZ2l0ICsgJ1x4MjInKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0gY2F0Y2ggKF8weDI3YTlhNSkgewogICAgICAgIF8weDFjNWMwZSA9IF8weDI3YTlhNTsKICAgIH0gZmluYWxseSB7CiAgICAgICAgbGV0IHsKICAgICAgICAgICAgc3Rkb3V0OiBfMHg0YWNmMzgsCiAgICAgICAgICAgIHN0ZGVycjogXzB4NDA3MGM2CiAgICAgICAgfSA9IF8weDFjNWMwZTsKICAgICAgICBpZiAoXzB4NGFjZjM4W18weDI1ODgwYygweDE1OSldKCkpCiAgICAgICAgICAgIF8weDExYjg1M1tfMHgyNTg4MGMoMHgxNTApXShfMHg0YWNmMzgpOwogICAgICAgIGlmIChfMHg0MDcwYzZbXzB4MjU4ODBjKDB4MTU5KV0oKSkKICAgICAgICAgICAgXzB4MTFiODUzW18weDI1ODgwYygweDE1MCldKF8weDQwNzBjNik7CiAgICB9Cn0pOwpmdW5jdGlvbiBfMHgzNzJhKCkgewogICAgY29uc3QgXzB4MmM3ZDdhID0gWwogICAgICAgICdceDIwLS1zaG93LWN1JywKICAgICAgICAnMTI1NTE2MDV0WG1sYlInLAogICAgICAgICdnaXRceDIwYWRkXHgyMC4nLAogICAgICAgICcyOEhuZUdSZicsCiAgICAgICAgJ0BnaXRodWIuY28nLAogICAgICAgICdnaXRceDIwY29uZmlnJywKICAgICAgICAnU25zeUonLAogICAgICAgICdzOi8vJywKICAgICAgICAnMjUyODFNUU9Mb0knLAogICAgICAgICdzcGxpdCcsCiAgICAgICAgJ3VobS4uXHgyMHRla3MnLAogICAgICAgICdceDIwdXNlci5lbWFpJywKICAgICAgICAnXHgyMC1tXHgyMFx4MjInLAogICAgICAgICctZm9yY2VceDIwLS1xJywKICAgICAgICAnNXwyfDB8NHwxfCcsCiAgICAgICAgJzIyNTMxNTZmR2JiWEUnLAogICAgICAgICdjWFhrcCcsCiAgICAgICAgJzEwbUtwbXZZJywKICAgICAgICAnOGVvb2FqWScsCiAgICAgICAgJ1x4MGFjb250b2hceDBhJywKICAgICAgICAnNDg2ZlNwa2ZZJywKICAgICAgICAna2xmWnInLAogICAgICAgICdnaXRceDIwY29tbWl0JywKICAgICAgICAnbFx4MjBceDIyJywKICAgICAgICAnQ29BSUonLAogICAgICAgICc4MDcxMDQ3UWxXUmpMJywKICAgICAgICAnaHpHS2gnLAogICAgICAgICdceDIwPlx4MjAvZGV2L251JywKICAgICAgICAnZXI6JywKICAgICAgICAnNTUyNjY4OWt2ZURzWicsCiAgICAgICAgJ3JUZ0ltJywKICAgICAgICAnLmdpdFx4MjJceDIwbWFzdCcsCiAgICAgICAgJzI0MDA1c2JnanhUJywKICAgICAgICAnbGxceDIwMj4mMScsCiAgICAgICAgJ2dpdFx4MjBwdXNoXHgyMC0nLAogICAgICAgICdyZXBseScsCiAgICAgICAgJ255YVx4MjBtYW5hP1x4MGEnLAogICAgICAgICdaQ0VyTCcsCiAgICAgICAgJ1x4MjBtYWluJywKICAgICAgICAnWEd2Q0EnLAogICAgICAgICdycmVudCcsCiAgICAgICAgJ2dpdFx4MjBicmFuY2gnLAogICAgICAgICc0NTA4NTVrR0tXWlcnLAogICAgICAgICdceDIwdXNlci5uYW1lJywKICAgICAgICAndHJpbScsCiAgICAgICAgJ0V4ZWN1dGluZy4nLAogICAgICAgICd1aWV0XHgyMFx4MjJodHRwJwogICAgXTsKICAgIF8weDM3MmEgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF8weDJjN2Q3YTsKICAgIH07CiAgICByZXR1cm4gXzB4MzcyYSgpOwp9"))

handler.help = ["git-push"].map((v) => v + " <text>");
handler.tags = ["owner"];
handler.command = /^(git-push)$/i;
handler.owner = true;

export default handler;
